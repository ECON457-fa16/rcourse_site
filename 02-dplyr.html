<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta name="generator" content="pandoc" />



<title>Data munging with dplyr</title>

<script src="libs/jquery-1.11.0/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link href="libs/bootstrap-2.3.2/css/flatly.min.css" rel="stylesheet" />
<link href="libs/bootstrap-2.3.2/css/bootstrap-responsive.min.css" rel="stylesheet" />
<script src="libs/bootstrap-2.3.2/js/bootstrap.min.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; background-color: #f8f8f8; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
pre, code { background-color: #f8f8f8; }
code > span.kw { color: #204a87; font-weight: bold; }
code > span.dt { color: #204a87; }
code > span.dv { color: #0000cf; }
code > span.bn { color: #0000cf; }
code > span.fl { color: #0000cf; }
code > span.ch { color: #4e9a06; }
code > span.st { color: #4e9a06; }
code > span.co { color: #8f5902; font-style: italic; }
code > span.ot { color: #8f5902; }
code > span.al { color: #ef2929; }
code > span.fu { color: #000000; }
code > span.er { font-weight: bold; }
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>



</head>

<body>

<div class="container">

<a href="index.html">Home</a>

<div id="header">
<h1 class="title">Data munging with dplyr</h1>
</div>


<p>While a lot of powerful tools are built into R, its greatest power comes from its massive base of users and developers, and the tools they create. These tools come in the form of packages that we download, then load - they give us access to many more functions. Loading a package into R is like getting a piece of lab equipment out of a storage locker and setting it up on the bench. Once it’s done, we can ask the package to do things for us.</p>
<p>We’re going to start by using a package called “dplyr”, built by Hadley Wickham.<br />dplyr provides a set of simple functions that correspond to the most common data manipulation verbs, so that you can easily translate your thoughts into code. Most of the this functionality is available in base <strong>R</strong>, but this package makes this kind of work much easier.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">&quot;dplyr&quot;</span>) <span class="co"># Install the package</span></code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">require</span>(dplyr) <span class="co">#Load the package into memory</span></code></pre>
<p><code>dplyr</code> implements the following verbs useful for data manipulation:</p>
<ul>
<li><code>group_by()</code>: set the grouping variable(s)</li>
<li><code>filter()</code>: focus on a subset of rows</li>
<li><code>select()</code>: focus on a subset of variables</li>
<li><code>mutate()</code>: add new columns (also <code>mutate_each()</code>)</li>
<li><code>summarise()</code>: reduce each group to a smaller number of summary statistics (also <code>summarise_each()</code>)</li>
<li><code>arrange()</code>: re-order the rows</li>
</ul>
<div id="filter-rows-with-filter" class="section level4">
<h4>Filter rows with <code>filter()</code></h4>
<p><code>filter()</code> allows you to select a subset of the rows of a data frame. The first argument is the name of the data frame, and the second and subsequent are filtering expressions evaluated in the context of that data frame</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">filter</span>(dat, Sepal.Length &gt;<span class="st"> </span><span class="dv">5</span>, Petal.Length &gt;<span class="st"> </span><span class="fl">1.5</span>)</code></pre>
<pre><code>##     Sepal.Length Sepal.Width Petal.Length Petal.Width    Species
## 1            5.4         3.9          1.7         0.4     setosa
## 2            5.7         3.8          1.7         0.3     setosa
## 3            5.4         3.4          1.7         0.2     setosa
## 4            5.1         3.3          1.7         0.5     setosa
## 5            5.1         3.8          1.9         0.4     setosa
## 6            5.1         3.8          1.6         0.2     setosa
## 7            7.0         3.2          4.7         1.4 versicolor
## 8            6.4         3.2          4.5         1.5 versicolor
## 9            6.9         3.1          4.9         1.5 versicolor
## 10           5.5         2.3          4.0         1.3 versicolor
## 11           6.5         2.8          4.6         1.5 versicolor
## 12           5.7         2.8          4.5         1.3 versicolor
## 13           6.3         3.3          4.7         1.6 versicolor
## 14           6.6         2.9          4.6         1.3 versicolor
## 15           5.2         2.7          3.9         1.4 versicolor
## 16           5.9         3.0          4.2         1.5 versicolor
## 17           6.0         2.2          4.0         1.0 versicolor
## 18           6.1         2.9          4.7         1.4 versicolor
## 19           5.6         2.9          3.6         1.3 versicolor
## 20           6.7         3.1          4.4         1.4 versicolor
## 21           5.6         3.0          4.5         1.5 versicolor
## 22           5.8         2.7          4.1         1.0 versicolor
## 23           6.2         2.2          4.5         1.5 versicolor
## 24           5.6         2.5          3.9         1.1 versicolor
## 25           5.9         3.2          4.8         1.8 versicolor
## 26           6.1         2.8          4.0         1.3 versicolor
## 27           6.3         2.5          4.9         1.5 versicolor
## 28           6.1         2.8          4.7         1.2 versicolor
## 29           6.4         2.9          4.3         1.3 versicolor
## 30           6.6         3.0          4.4         1.4 versicolor
## 31           6.8         2.8          4.8         1.4 versicolor
## 32           6.7         3.0          5.0         1.7 versicolor
## 33           6.0         2.9          4.5         1.5 versicolor
## 34           5.7         2.6          3.5         1.0 versicolor
## 35           5.5         2.4          3.8         1.1 versicolor
## 36           5.5         2.4          3.7         1.0 versicolor
## 37           5.8         2.7          3.9         1.2 versicolor
## 38           6.0         2.7          5.1         1.6 versicolor
## 39           5.4         3.0          4.5         1.5 versicolor
## 40           6.0         3.4          4.5         1.6 versicolor
## 41           6.7         3.1          4.7         1.5 versicolor
## 42           6.3         2.3          4.4         1.3 versicolor
## 43           5.6         3.0          4.1         1.3 versicolor
## 44           5.5         2.5          4.0         1.3 versicolor
## 45           5.5         2.6          4.4         1.2 versicolor
## 46           6.1         3.0          4.6         1.4 versicolor
## 47           5.8         2.6          4.0         1.2 versicolor
## 48           5.6         2.7          4.2         1.3 versicolor
## 49           5.7         3.0          4.2         1.2 versicolor
## 50           5.7         2.9          4.2         1.3 versicolor
## 51           6.2         2.9          4.3         1.3 versicolor
## 52           5.1         2.5          3.0         1.1 versicolor
## 53           5.7         2.8          4.1         1.3 versicolor
## 54           6.3         3.3          6.0         2.5  virginica
## 55           5.8         2.7          5.1         1.9  virginica
## 56           7.1         3.0          5.9         2.1  virginica
## 57           6.3         2.9          5.6         1.8  virginica
## 58           6.5         3.0          5.8         2.2  virginica
## 59           7.6         3.0          6.6         2.1  virginica
## 60           7.3         2.9          6.3         1.8  virginica
## 61           6.7         2.5          5.8         1.8  virginica
## 62           7.2         3.6          6.1         2.5  virginica
## 63           6.5         3.2          5.1         2.0  virginica
## 64           6.4         2.7          5.3         1.9  virginica
## 65           6.8         3.0          5.5         2.1  virginica
## 66           5.7         2.5          5.0         2.0  virginica
## 67           5.8         2.8          5.1         2.4  virginica
## 68           6.4         3.2          5.3         2.3  virginica
## 69           6.5         3.0          5.5         1.8  virginica
## 70           7.7         3.8          6.7         2.2  virginica
## 71           7.7         2.6          6.9         2.3  virginica
## 72           6.0         2.2          5.0         1.5  virginica
## 73           6.9         3.2          5.7         2.3  virginica
## 74           5.6         2.8          4.9         2.0  virginica
## 75           7.7          NA          6.7         2.0  virginica
## 76           6.3         2.7          4.9         1.8  virginica
## 77           6.7         3.3          5.7         2.1  virginica
## 78           7.2         3.2          6.0         1.8  virginica
## 79           6.2         2.8          4.8         1.8  virginica
## 80           6.1         3.0          4.9         1.8  virginica
## 81           6.4         2.8          5.6         2.1  virginica
## 82           7.2         3.0          5.8         1.6  virginica
## 83           7.4         2.8          6.1         1.9  virginica
## 84           7.9         3.8          6.4         2.0  virginica
## 85           6.4         2.8          5.6         2.2  virginica
## 86           6.3         2.8          5.1         1.5  virginica
## 87           6.1         2.6          5.6         1.4  virginica
## 88           7.7         3.0          6.1         2.3  virginica
## 89           6.3         3.4          5.6         2.4  virginica
## 90           6.4          NA          5.5         1.8  virginica
## 91           6.0         3.0          4.8         1.8  virginica
## 92           6.9          NA          5.4         2.1  virginica
## 93           6.7         3.1          5.6         2.4  virginica
## 94           6.9         3.1          5.1         2.3  virginica
## 95           5.8         2.7          5.1         1.9  virginica
## 96           6.8         3.2          5.9         2.3  virginica
## 97           6.7         3.3          5.7         2.5  virginica
## 98           6.7         3.0          5.2         2.3  virginica
## 99           6.3         2.5          5.0         1.9  virginica
## 100          6.5         3.0          5.2         2.0  virginica
## 101          6.2         3.4          5.4         2.3  virginica
## 102          5.9         3.0          5.1         1.8  virginica</code></pre>
<p>Remember we talked about indexing to select rows… the equivalent would be:</p>
<pre class="sourceCode r"><code class="sourceCode r">dat[dat$Sepal.Length &gt;<span class="st"> </span><span class="dv">5</span> &amp;<span class="st"> </span>dat$Petal.Length &gt;<span class="st"> </span><span class="fl">1.5</span>,]</code></pre>
<pre><code>##     Sepal.Length Sepal.Width Petal.Length Petal.Width    Species
## 6            5.4         3.9          1.7         0.4     setosa
## 19           5.7         3.8          1.7         0.3     setosa
## 21           5.4         3.4          1.7         0.2     setosa
## 24           5.1         3.3          1.7         0.5     setosa
## 45           5.1         3.8          1.9         0.4     setosa
## 47           5.1         3.8          1.6         0.2     setosa
## 51           7.0         3.2          4.7         1.4 versicolor
## 52           6.4         3.2          4.5         1.5 versicolor
## 53           6.9         3.1          4.9         1.5 versicolor
## 54           5.5         2.3          4.0         1.3 versicolor
## 55           6.5         2.8          4.6         1.5 versicolor
## 56           5.7         2.8          4.5         1.3 versicolor
## 57           6.3         3.3          4.7         1.6 versicolor
## 59           6.6         2.9          4.6         1.3 versicolor
## 60           5.2         2.7          3.9         1.4 versicolor
## 62           5.9         3.0          4.2         1.5 versicolor
## 63           6.0         2.2          4.0         1.0 versicolor
## 64           6.1         2.9          4.7         1.4 versicolor
## 65           5.6         2.9          3.6         1.3 versicolor
## 66           6.7         3.1          4.4         1.4 versicolor
## 67           5.6         3.0          4.5         1.5 versicolor
## 68           5.8         2.7          4.1         1.0 versicolor
## 69           6.2         2.2          4.5         1.5 versicolor
## 70           5.6         2.5          3.9         1.1 versicolor
## 71           5.9         3.2          4.8         1.8 versicolor
## 72           6.1         2.8          4.0         1.3 versicolor
## 73           6.3         2.5          4.9         1.5 versicolor
## 74           6.1         2.8          4.7         1.2 versicolor
## 75           6.4         2.9          4.3         1.3 versicolor
## 76           6.6         3.0          4.4         1.4 versicolor
## 77           6.8         2.8          4.8         1.4 versicolor
## 78           6.7         3.0          5.0         1.7 versicolor
## 79           6.0         2.9          4.5         1.5 versicolor
## 80           5.7         2.6          3.5         1.0 versicolor
## 81           5.5         2.4          3.8         1.1 versicolor
## 82           5.5         2.4          3.7         1.0 versicolor
## 83           5.8         2.7          3.9         1.2 versicolor
## 84           6.0         2.7          5.1         1.6 versicolor
## 85           5.4         3.0          4.5         1.5 versicolor
## 86           6.0         3.4          4.5         1.6 versicolor
## 87           6.7         3.1          4.7         1.5 versicolor
## 88           6.3         2.3          4.4         1.3 versicolor
## 89           5.6         3.0          4.1         1.3 versicolor
## 90           5.5         2.5          4.0         1.3 versicolor
## 91           5.5         2.6          4.4         1.2 versicolor
## 92           6.1         3.0          4.6         1.4 versicolor
## 93           5.8         2.6          4.0         1.2 versicolor
## 95           5.6         2.7          4.2         1.3 versicolor
## 96           5.7         3.0          4.2         1.2 versicolor
## 97           5.7         2.9          4.2         1.3 versicolor
## 98           6.2         2.9          4.3         1.3 versicolor
## 99           5.1         2.5          3.0         1.1 versicolor
## 100          5.7         2.8          4.1         1.3 versicolor
## 101          6.3         3.3          6.0         2.5  virginica
## 102          5.8         2.7          5.1         1.9  virginica
## 103          7.1         3.0          5.9         2.1  virginica
## 104          6.3         2.9          5.6         1.8  virginica
## 105          6.5         3.0          5.8         2.2  virginica
## 106          7.6         3.0          6.6         2.1  virginica
## 108          7.3         2.9          6.3         1.8  virginica
## 109          6.7         2.5          5.8         1.8  virginica
## 110          7.2         3.6          6.1         2.5  virginica
## 111          6.5         3.2          5.1         2.0  virginica
## 112          6.4         2.7          5.3         1.9  virginica
## 113          6.8         3.0          5.5         2.1  virginica
## 114          5.7         2.5          5.0         2.0  virginica
## 115          5.8         2.8          5.1         2.4  virginica
## 116          6.4         3.2          5.3         2.3  virginica
## 117          6.5         3.0          5.5         1.8  virginica
## 118          7.7         3.8          6.7         2.2  virginica
## 119          7.7         2.6          6.9         2.3  virginica
## 120          6.0         2.2          5.0         1.5  virginica
## 121          6.9         3.2          5.7         2.3  virginica
## 122          5.6         2.8          4.9         2.0  virginica
## 123          7.7          NA          6.7         2.0  virginica
## 124          6.3         2.7          4.9         1.8  virginica
## 125          6.7         3.3          5.7         2.1  virginica
## 126          7.2         3.2          6.0         1.8  virginica
## 127          6.2         2.8          4.8         1.8  virginica
## 128          6.1         3.0          4.9         1.8  virginica
## 129          6.4         2.8          5.6         2.1  virginica
## 130          7.2         3.0          5.8         1.6  virginica
## 131          7.4         2.8          6.1         1.9  virginica
## 132          7.9         3.8          6.4         2.0  virginica
## 133          6.4         2.8          5.6         2.2  virginica
## 134          6.3         2.8          5.1         1.5  virginica
## 135          6.1         2.6          5.6         1.4  virginica
## 136          7.7         3.0          6.1         2.3  virginica
## 137          6.3         3.4          5.6         2.4  virginica
## 138          6.4          NA          5.5         1.8  virginica
## 139          6.0         3.0          4.8         1.8  virginica
## 140          6.9          NA          5.4         2.1  virginica
## 141          6.7         3.1          5.6         2.4  virginica
## 142          6.9         3.1          5.1         2.3  virginica
## 143          5.8         2.7          5.1         1.9  virginica
## 144          6.8         3.2          5.9         2.3  virginica
## 145          6.7         3.3          5.7         2.5  virginica
## 146          6.7         3.0          5.2         2.3  virginica
## 147          6.3         2.5          5.0         1.9  virginica
## 148          6.5         3.0          5.2         2.0  virginica
## 149          6.2         3.4          5.4         2.3  virginica
## 150          5.9         3.0          5.1         1.8  virginica</code></pre>
<p>What if we want to select flowers with Sepal Length &gt; 5 <strong>OR</strong> Petal Length &gt; 1.5? (The above uses <strong>AND</strong>). In <strong>R</strong>, the <code>|</code> (pipe) character means <strong>OR</strong></p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">filter</span>(dat, Sepal.Length &gt;<span class="st"> </span><span class="dv">5</span> |<span class="st"> </span>Petal.Length &gt;<span class="st"> </span><span class="fl">1.5</span>)</code></pre>
<pre><code>##     Sepal.Length Sepal.Width Petal.Length Petal.Width    Species
## 1            5.1         3.5          1.4         0.2     setosa
## 2            5.4         3.9          1.7         0.4     setosa
## 3            5.4         3.7          1.5         0.2     setosa
## 4            4.8         3.4          1.6         0.2     setosa
## 5            5.8         4.0          1.2         0.2     setosa
## 6            5.7         4.4          1.5         0.4     setosa
## 7            5.4         3.9          1.3         0.4     setosa
## 8            5.1         3.5          1.4         0.3     setosa
## 9            5.7         3.8          1.7         0.3     setosa
## 10           5.1         3.8          1.5         0.3     setosa
## 11           5.4         3.4          1.7         0.2     setosa
## 12           5.1         3.7          1.5         0.4     setosa
## 13           5.1         3.3          1.7         0.5     setosa
## 14           4.8         3.4          1.9         0.2     setosa
## 15           5.0         3.0          1.6         0.2     setosa
## 16           5.0         3.4          1.6         0.4     setosa
## 17           5.2         3.5          1.5         0.2     setosa
## 18           5.2         3.4          1.4         0.2     setosa
## 19           4.7         3.2          1.6         0.2     setosa
## 20           4.8         3.1          1.6         0.2     setosa
## 21           5.4         3.4          1.5         0.4     setosa
## 22           5.2         4.1          1.5         0.1     setosa
## 23           5.5         4.2          1.4         0.2     setosa
## 24           5.5         3.5          1.3         0.2     setosa
## 25           5.1         3.4          1.5         0.2     setosa
## 26           5.0         3.5          1.6         0.6     setosa
## 27           5.1         3.8          1.9         0.4     setosa
## 28           5.1         3.8          1.6         0.2     setosa
## 29           5.3         3.7          1.5         0.2     setosa
## 30           7.0         3.2          4.7         1.4 versicolor
## 31           6.4         3.2          4.5         1.5 versicolor
## 32           6.9         3.1          4.9         1.5 versicolor
## 33           5.5         2.3          4.0         1.3 versicolor
## 34           6.5         2.8          4.6         1.5 versicolor
## 35           5.7         2.8          4.5         1.3 versicolor
## 36           6.3         3.3          4.7         1.6 versicolor
## 37           4.9         2.4          3.3         1.0 versicolor
## 38           6.6         2.9          4.6         1.3 versicolor
## 39           5.2         2.7          3.9         1.4 versicolor
## 40           5.0         2.0          3.5         1.0 versicolor
## 41           5.9         3.0          4.2         1.5 versicolor
## 42           6.0         2.2          4.0         1.0 versicolor
## 43           6.1         2.9          4.7         1.4 versicolor
## 44           5.6         2.9          3.6         1.3 versicolor
## 45           6.7         3.1          4.4         1.4 versicolor
## 46           5.6         3.0          4.5         1.5 versicolor
## 47           5.8         2.7          4.1         1.0 versicolor
## 48           6.2         2.2          4.5         1.5 versicolor
## 49           5.6         2.5          3.9         1.1 versicolor
## 50           5.9         3.2          4.8         1.8 versicolor
## 51           6.1         2.8          4.0         1.3 versicolor
## 52           6.3         2.5          4.9         1.5 versicolor
## 53           6.1         2.8          4.7         1.2 versicolor
## 54           6.4         2.9          4.3         1.3 versicolor
## 55           6.6         3.0          4.4         1.4 versicolor
## 56           6.8         2.8          4.8         1.4 versicolor
## 57           6.7         3.0          5.0         1.7 versicolor
## 58           6.0         2.9          4.5         1.5 versicolor
## 59           5.7         2.6          3.5         1.0 versicolor
## 60           5.5         2.4          3.8         1.1 versicolor
## 61           5.5         2.4          3.7         1.0 versicolor
## 62           5.8         2.7          3.9         1.2 versicolor
## 63           6.0         2.7          5.1         1.6 versicolor
## 64           5.4         3.0          4.5         1.5 versicolor
## 65           6.0         3.4          4.5         1.6 versicolor
## 66           6.7         3.1          4.7         1.5 versicolor
## 67           6.3         2.3          4.4         1.3 versicolor
## 68           5.6         3.0          4.1         1.3 versicolor
## 69           5.5         2.5          4.0         1.3 versicolor
## 70           5.5         2.6          4.4         1.2 versicolor
## 71           6.1         3.0          4.6         1.4 versicolor
## 72           5.8         2.6          4.0         1.2 versicolor
## 73           5.0          NA          3.3         1.0 versicolor
## 74           5.6         2.7          4.2         1.3 versicolor
## 75           5.7         3.0          4.2         1.2 versicolor
## 76           5.7         2.9          4.2         1.3 versicolor
## 77           6.2         2.9          4.3         1.3 versicolor
## 78           5.1         2.5          3.0         1.1 versicolor
## 79           5.7         2.8          4.1         1.3 versicolor
## 80           6.3         3.3          6.0         2.5  virginica
## 81           5.8         2.7          5.1         1.9  virginica
## 82           7.1         3.0          5.9         2.1  virginica
## 83           6.3         2.9          5.6         1.8  virginica
## 84           6.5         3.0          5.8         2.2  virginica
## 85           7.6         3.0          6.6         2.1  virginica
## 86           4.9         2.5          4.5         1.7  virginica
## 87           7.3         2.9          6.3         1.8  virginica
## 88           6.7         2.5          5.8         1.8  virginica
## 89           7.2         3.6          6.1         2.5  virginica
## 90           6.5         3.2          5.1         2.0  virginica
## 91           6.4         2.7          5.3         1.9  virginica
## 92           6.8         3.0          5.5         2.1  virginica
## 93           5.7         2.5          5.0         2.0  virginica
## 94           5.8         2.8          5.1         2.4  virginica
## 95           6.4         3.2          5.3         2.3  virginica
## 96           6.5         3.0          5.5         1.8  virginica
## 97           7.7         3.8          6.7         2.2  virginica
## 98           7.7         2.6          6.9         2.3  virginica
## 99           6.0         2.2          5.0         1.5  virginica
## 100          6.9         3.2          5.7         2.3  virginica
## 101          5.6         2.8          4.9         2.0  virginica
## 102          7.7          NA          6.7         2.0  virginica
## 103          6.3         2.7          4.9         1.8  virginica
## 104          6.7         3.3          5.7         2.1  virginica
## 105          7.2         3.2          6.0         1.8  virginica
## 106          6.2         2.8          4.8         1.8  virginica
## 107          6.1         3.0          4.9         1.8  virginica
## 108          6.4         2.8          5.6         2.1  virginica
## 109          7.2         3.0          5.8         1.6  virginica
## 110          7.4         2.8          6.1         1.9  virginica
## 111          7.9         3.8          6.4         2.0  virginica
## 112          6.4         2.8          5.6         2.2  virginica
## 113          6.3         2.8          5.1         1.5  virginica
## 114          6.1         2.6          5.6         1.4  virginica
## 115          7.7         3.0          6.1         2.3  virginica
## 116          6.3         3.4          5.6         2.4  virginica
## 117          6.4          NA          5.5         1.8  virginica
## 118          6.0         3.0          4.8         1.8  virginica
## 119          6.9          NA          5.4         2.1  virginica
## 120          6.7         3.1          5.6         2.4  virginica
## 121          6.9         3.1          5.1         2.3  virginica
## 122          5.8         2.7          5.1         1.9  virginica
## 123          6.8         3.2          5.9         2.3  virginica
## 124          6.7         3.3          5.7         2.5  virginica
## 125          6.7         3.0          5.2         2.3  virginica
## 126          6.3         2.5          5.0         1.9  virginica
## 127          6.5         3.0          5.2         2.0  virginica
## 128          6.2         3.4          5.4         2.3  virginica
## 129          5.9         3.0          5.1         1.8  virginica</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">## Works with indexing as well:
dat[dat$Sepal.Length &gt;<span class="st"> </span><span class="dv">5</span> |<span class="st"> </span>dat$Petal.Length &gt;<span class="st"> </span><span class="fl">1.5</span>,]</code></pre>
<pre><code>##     Sepal.Length Sepal.Width Petal.Length Petal.Width    Species
## 1            5.1         3.5          1.4         0.2     setosa
## 6            5.4         3.9          1.7         0.4     setosa
## 11           5.4         3.7          1.5         0.2     setosa
## 12           4.8         3.4          1.6         0.2     setosa
## 15           5.8         4.0          1.2         0.2     setosa
## 16           5.7         4.4          1.5         0.4     setosa
## 17           5.4         3.9          1.3         0.4     setosa
## 18           5.1         3.5          1.4         0.3     setosa
## 19           5.7         3.8          1.7         0.3     setosa
## 20           5.1         3.8          1.5         0.3     setosa
## 21           5.4         3.4          1.7         0.2     setosa
## 22           5.1         3.7          1.5         0.4     setosa
## 24           5.1         3.3          1.7         0.5     setosa
## 25           4.8         3.4          1.9         0.2     setosa
## 26           5.0         3.0          1.6         0.2     setosa
## 27           5.0         3.4          1.6         0.4     setosa
## 28           5.2         3.5          1.5         0.2     setosa
## 29           5.2         3.4          1.4         0.2     setosa
## 30           4.7         3.2          1.6         0.2     setosa
## 31           4.8         3.1          1.6         0.2     setosa
## 32           5.4         3.4          1.5         0.4     setosa
## 33           5.2         4.1          1.5         0.1     setosa
## 34           5.5         4.2          1.4         0.2     setosa
## 37           5.5         3.5          1.3         0.2     setosa
## 40           5.1         3.4          1.5         0.2     setosa
## 44           5.0         3.5          1.6         0.6     setosa
## 45           5.1         3.8          1.9         0.4     setosa
## 47           5.1         3.8          1.6         0.2     setosa
## 49           5.3         3.7          1.5         0.2     setosa
## 51           7.0         3.2          4.7         1.4 versicolor
## 52           6.4         3.2          4.5         1.5 versicolor
## 53           6.9         3.1          4.9         1.5 versicolor
## 54           5.5         2.3          4.0         1.3 versicolor
## 55           6.5         2.8          4.6         1.5 versicolor
## 56           5.7         2.8          4.5         1.3 versicolor
## 57           6.3         3.3          4.7         1.6 versicolor
## 58           4.9         2.4          3.3         1.0 versicolor
## 59           6.6         2.9          4.6         1.3 versicolor
## 60           5.2         2.7          3.9         1.4 versicolor
## 61           5.0         2.0          3.5         1.0 versicolor
## 62           5.9         3.0          4.2         1.5 versicolor
## 63           6.0         2.2          4.0         1.0 versicolor
## 64           6.1         2.9          4.7         1.4 versicolor
## 65           5.6         2.9          3.6         1.3 versicolor
## 66           6.7         3.1          4.4         1.4 versicolor
## 67           5.6         3.0          4.5         1.5 versicolor
## 68           5.8         2.7          4.1         1.0 versicolor
## 69           6.2         2.2          4.5         1.5 versicolor
## 70           5.6         2.5          3.9         1.1 versicolor
## 71           5.9         3.2          4.8         1.8 versicolor
## 72           6.1         2.8          4.0         1.3 versicolor
## 73           6.3         2.5          4.9         1.5 versicolor
## 74           6.1         2.8          4.7         1.2 versicolor
## 75           6.4         2.9          4.3         1.3 versicolor
## 76           6.6         3.0          4.4         1.4 versicolor
## 77           6.8         2.8          4.8         1.4 versicolor
## 78           6.7         3.0          5.0         1.7 versicolor
## 79           6.0         2.9          4.5         1.5 versicolor
## 80           5.7         2.6          3.5         1.0 versicolor
## 81           5.5         2.4          3.8         1.1 versicolor
## 82           5.5         2.4          3.7         1.0 versicolor
## 83           5.8         2.7          3.9         1.2 versicolor
## 84           6.0         2.7          5.1         1.6 versicolor
## 85           5.4         3.0          4.5         1.5 versicolor
## 86           6.0         3.4          4.5         1.6 versicolor
## 87           6.7         3.1          4.7         1.5 versicolor
## 88           6.3         2.3          4.4         1.3 versicolor
## 89           5.6         3.0          4.1         1.3 versicolor
## 90           5.5         2.5          4.0         1.3 versicolor
## 91           5.5         2.6          4.4         1.2 versicolor
## 92           6.1         3.0          4.6         1.4 versicolor
## 93           5.8         2.6          4.0         1.2 versicolor
## 94           5.0          NA          3.3         1.0 versicolor
## 95           5.6         2.7          4.2         1.3 versicolor
## 96           5.7         3.0          4.2         1.2 versicolor
## 97           5.7         2.9          4.2         1.3 versicolor
## 98           6.2         2.9          4.3         1.3 versicolor
## 99           5.1         2.5          3.0         1.1 versicolor
## 100          5.7         2.8          4.1         1.3 versicolor
## 101          6.3         3.3          6.0         2.5  virginica
## 102          5.8         2.7          5.1         1.9  virginica
## 103          7.1         3.0          5.9         2.1  virginica
## 104          6.3         2.9          5.6         1.8  virginica
## 105          6.5         3.0          5.8         2.2  virginica
## 106          7.6         3.0          6.6         2.1  virginica
## 107          4.9         2.5          4.5         1.7  virginica
## 108          7.3         2.9          6.3         1.8  virginica
## 109          6.7         2.5          5.8         1.8  virginica
## 110          7.2         3.6          6.1         2.5  virginica
## 111          6.5         3.2          5.1         2.0  virginica
## 112          6.4         2.7          5.3         1.9  virginica
## 113          6.8         3.0          5.5         2.1  virginica
## 114          5.7         2.5          5.0         2.0  virginica
## 115          5.8         2.8          5.1         2.4  virginica
## 116          6.4         3.2          5.3         2.3  virginica
## 117          6.5         3.0          5.5         1.8  virginica
## 118          7.7         3.8          6.7         2.2  virginica
## 119          7.7         2.6          6.9         2.3  virginica
## 120          6.0         2.2          5.0         1.5  virginica
## 121          6.9         3.2          5.7         2.3  virginica
## 122          5.6         2.8          4.9         2.0  virginica
## 123          7.7          NA          6.7         2.0  virginica
## 124          6.3         2.7          4.9         1.8  virginica
## 125          6.7         3.3          5.7         2.1  virginica
## 126          7.2         3.2          6.0         1.8  virginica
## 127          6.2         2.8          4.8         1.8  virginica
## 128          6.1         3.0          4.9         1.8  virginica
## 129          6.4         2.8          5.6         2.1  virginica
## 130          7.2         3.0          5.8         1.6  virginica
## 131          7.4         2.8          6.1         1.9  virginica
## 132          7.9         3.8          6.4         2.0  virginica
## 133          6.4         2.8          5.6         2.2  virginica
## 134          6.3         2.8          5.1         1.5  virginica
## 135          6.1         2.6          5.6         1.4  virginica
## 136          7.7         3.0          6.1         2.3  virginica
## 137          6.3         3.4          5.6         2.4  virginica
## 138          6.4          NA          5.5         1.8  virginica
## 139          6.0         3.0          4.8         1.8  virginica
## 140          6.9          NA          5.4         2.1  virginica
## 141          6.7         3.1          5.6         2.4  virginica
## 142          6.9         3.1          5.1         2.3  virginica
## 143          5.8         2.7          5.1         1.9  virginica
## 144          6.8         3.2          5.9         2.3  virginica
## 145          6.7         3.3          5.7         2.5  virginica
## 146          6.7         3.0          5.2         2.3  virginica
## 147          6.3         2.5          5.0         1.9  virginica
## 148          6.5         3.0          5.2         2.0  virginica
## 149          6.2         3.4          5.4         2.3  virginica
## 150          5.9         3.0          5.1         1.8  virginica</code></pre>
</div>
<div id="arrange-rows-with-arrange" class="section level4">
<h4>Arrange rows with <code>arrange()</code></h4>
<p><code>arrange()</code> works similarly to <code>filter()</code> except that instead of filtering or selecting rows, it reorders them. It takes a data frame, and a set of column names (or more complicated expressions) to order by. If you provide more than one column name, each additional column will be used to break ties in the values of preceding columns:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">arrange</span>(dat, Sepal.Length, Sepal.Width)</code></pre>
<pre><code>##     Sepal.Length Sepal.Width Petal.Length Petal.Width    Species
## 1            4.3         3.0          1.1         0.1     setosa
## 2            4.4         2.9          1.4         0.2     setosa
## 3            4.4         3.0          1.3         0.2     setosa
## 4            4.4          NA          1.3         0.2     setosa
## 5            4.5         2.3          1.3         0.3     setosa
## 6            4.6         3.1          1.5         0.2     setosa
## 7            4.6         3.2          1.4         0.2     setosa
## 8            4.6         3.4          1.4         0.3     setosa
## 9            4.6         3.6          1.0         0.2     setosa
## 10           4.7         3.2          1.3         0.2     setosa
## 11           4.7         3.2          1.6         0.2     setosa
## 12           4.8         3.0          1.4         0.1     setosa
## 13           4.8         3.0          1.4         0.3     setosa
## 14           4.8         3.1          1.6         0.2     setosa
## 15           4.8         3.4          1.6         0.2     setosa
## 16           4.8         3.4          1.9         0.2     setosa
## 17           4.9         2.4          3.3         1.0 versicolor
## 18           4.9         2.5          4.5         1.7  virginica
## 19           4.9         3.0          1.4         0.2     setosa
## 20           4.9         3.1          1.5         0.1     setosa
## 21           4.9         3.1          1.5         0.2     setosa
## 22           4.9         3.6          1.4         0.1     setosa
## 23           5.0         2.0          3.5         1.0 versicolor
## 24           5.0         3.0          1.6         0.2     setosa
## 25           5.0         3.2          1.2         0.2     setosa
## 26           5.0         3.3          1.4         0.2     setosa
## 27           5.0         3.4          1.5         0.2     setosa
## 28           5.0         3.4          1.6         0.4     setosa
## 29           5.0         3.5          1.3         0.3     setosa
## 30           5.0         3.5          1.6         0.6     setosa
## 31           5.0         3.6          1.4         0.2     setosa
## 32           5.0          NA          3.3         1.0 versicolor
## 33           5.1         2.5          3.0         1.1 versicolor
## 34           5.1         3.3          1.7         0.5     setosa
## 35           5.1         3.4          1.5         0.2     setosa
## 36           5.1         3.5          1.4         0.2     setosa
## 37           5.1         3.5          1.4         0.3     setosa
## 38           5.1         3.7          1.5         0.4     setosa
## 39           5.1         3.8          1.5         0.3     setosa
## 40           5.1         3.8          1.9         0.4     setosa
## 41           5.1         3.8          1.6         0.2     setosa
## 42           5.2         2.7          3.9         1.4 versicolor
## 43           5.2         3.4          1.4         0.2     setosa
## 44           5.2         3.5          1.5         0.2     setosa
## 45           5.2         4.1          1.5         0.1     setosa
## 46           5.3         3.7          1.5         0.2     setosa
## 47           5.4         3.0          4.5         1.5 versicolor
## 48           5.4         3.4          1.7         0.2     setosa
## 49           5.4         3.4          1.5         0.4     setosa
## 50           5.4         3.7          1.5         0.2     setosa
## 51           5.4         3.9          1.7         0.4     setosa
## 52           5.4         3.9          1.3         0.4     setosa
## 53           5.5         2.3          4.0         1.3 versicolor
## 54           5.5         2.4          3.8         1.1 versicolor
## 55           5.5         2.4          3.7         1.0 versicolor
## 56           5.5         2.5          4.0         1.3 versicolor
## 57           5.5         2.6          4.4         1.2 versicolor
## 58           5.5         3.5          1.3         0.2     setosa
## 59           5.5         4.2          1.4         0.2     setosa
## 60           5.6         2.5          3.9         1.1 versicolor
## 61           5.6         2.7          4.2         1.3 versicolor
## 62           5.6         2.8          4.9         2.0  virginica
## 63           5.6         2.9          3.6         1.3 versicolor
## 64           5.6         3.0          4.5         1.5 versicolor
## 65           5.6         3.0          4.1         1.3 versicolor
## 66           5.7         2.5          5.0         2.0  virginica
## 67           5.7         2.6          3.5         1.0 versicolor
## 68           5.7         2.8          4.5         1.3 versicolor
## 69           5.7         2.8          4.1         1.3 versicolor
## 70           5.7         2.9          4.2         1.3 versicolor
## 71           5.7         3.0          4.2         1.2 versicolor
## 72           5.7         3.8          1.7         0.3     setosa
## 73           5.7         4.4          1.5         0.4     setosa
## 74           5.8         2.6          4.0         1.2 versicolor
## 75           5.8         2.7          4.1         1.0 versicolor
## 76           5.8         2.7          3.9         1.2 versicolor
## 77           5.8         2.7          5.1         1.9  virginica
## 78           5.8         2.7          5.1         1.9  virginica
## 79           5.8         2.8          5.1         2.4  virginica
## 80           5.8         4.0          1.2         0.2     setosa
## 81           5.9         3.0          4.2         1.5 versicolor
## 82           5.9         3.0          5.1         1.8  virginica
## 83           5.9         3.2          4.8         1.8 versicolor
## 84           6.0         2.2          4.0         1.0 versicolor
## 85           6.0         2.2          5.0         1.5  virginica
## 86           6.0         2.7          5.1         1.6 versicolor
## 87           6.0         2.9          4.5         1.5 versicolor
## 88           6.0         3.0          4.8         1.8  virginica
## 89           6.0         3.4          4.5         1.6 versicolor
## 90           6.1         2.6          5.6         1.4  virginica
## 91           6.1         2.8          4.0         1.3 versicolor
## 92           6.1         2.8          4.7         1.2 versicolor
## 93           6.1         2.9          4.7         1.4 versicolor
## 94           6.1         3.0          4.6         1.4 versicolor
## 95           6.1         3.0          4.9         1.8  virginica
## 96           6.2         2.2          4.5         1.5 versicolor
## 97           6.2         2.8          4.8         1.8  virginica
## 98           6.2         2.9          4.3         1.3 versicolor
## 99           6.2         3.4          5.4         2.3  virginica
## 100          6.3         2.3          4.4         1.3 versicolor
## 101          6.3         2.5          4.9         1.5 versicolor
## 102          6.3         2.5          5.0         1.9  virginica
## 103          6.3         2.7          4.9         1.8  virginica
## 104          6.3         2.8          5.1         1.5  virginica
## 105          6.3         2.9          5.6         1.8  virginica
## 106          6.3         3.3          4.7         1.6 versicolor
## 107          6.3         3.3          6.0         2.5  virginica
## 108          6.3         3.4          5.6         2.4  virginica
## 109          6.4         2.7          5.3         1.9  virginica
## 110          6.4         2.8          5.6         2.1  virginica
## 111          6.4         2.8          5.6         2.2  virginica
## 112          6.4         2.9          4.3         1.3 versicolor
## 113          6.4         3.2          4.5         1.5 versicolor
## 114          6.4         3.2          5.3         2.3  virginica
## 115          6.4          NA          5.5         1.8  virginica
## 116          6.5         2.8          4.6         1.5 versicolor
## 117          6.5         3.0          5.8         2.2  virginica
## 118          6.5         3.0          5.5         1.8  virginica
## 119          6.5         3.0          5.2         2.0  virginica
## 120          6.5         3.2          5.1         2.0  virginica
## 121          6.6         2.9          4.6         1.3 versicolor
## 122          6.6         3.0          4.4         1.4 versicolor
## 123          6.7         2.5          5.8         1.8  virginica
## 124          6.7         3.0          5.0         1.7 versicolor
## 125          6.7         3.0          5.2         2.3  virginica
## 126          6.7         3.1          4.4         1.4 versicolor
## 127          6.7         3.1          4.7         1.5 versicolor
## 128          6.7         3.1          5.6         2.4  virginica
## 129          6.7         3.3          5.7         2.1  virginica
## 130          6.7         3.3          5.7         2.5  virginica
## 131          6.8         2.8          4.8         1.4 versicolor
## 132          6.8         3.0          5.5         2.1  virginica
## 133          6.8         3.2          5.9         2.3  virginica
## 134          6.9         3.1          4.9         1.5 versicolor
## 135          6.9         3.1          5.1         2.3  virginica
## 136          6.9         3.2          5.7         2.3  virginica
## 137          6.9          NA          5.4         2.1  virginica
## 138          7.0         3.2          4.7         1.4 versicolor
## 139          7.1         3.0          5.9         2.1  virginica
## 140          7.2         3.0          5.8         1.6  virginica
## 141          7.2         3.2          6.0         1.8  virginica
## 142          7.2         3.6          6.1         2.5  virginica
## 143          7.3         2.9          6.3         1.8  virginica
## 144          7.4         2.8          6.1         1.9  virginica
## 145          7.6         3.0          6.6         2.1  virginica
## 146          7.7         2.6          6.9         2.3  virginica
## 147          7.7         3.0          6.1         2.3  virginica
## 148          7.7         3.8          6.7         2.2  virginica
## 149          7.7          NA          6.7         2.0  virginica
## 150          7.9         3.8          6.4         2.0  virginica</code></pre>
<p>Use <code>desc()</code> to order a column in descending order:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">arrange</span>(dat, <span class="kw">desc</span>(Petal.Length))</code></pre>
<pre><code>##     Sepal.Length Sepal.Width Petal.Length Petal.Width    Species
## 1            7.7         2.6          6.9         2.3  virginica
## 2            7.7         3.8          6.7         2.2  virginica
## 3            7.7          NA          6.7         2.0  virginica
## 4            7.6         3.0          6.6         2.1  virginica
## 5            7.9         3.8          6.4         2.0  virginica
## 6            7.3         2.9          6.3         1.8  virginica
## 7            7.2         3.6          6.1         2.5  virginica
## 8            7.4         2.8          6.1         1.9  virginica
## 9            7.7         3.0          6.1         2.3  virginica
## 10           6.3         3.3          6.0         2.5  virginica
## 11           7.2         3.2          6.0         1.8  virginica
## 12           7.1         3.0          5.9         2.1  virginica
## 13           6.8         3.2          5.9         2.3  virginica
## 14           6.5         3.0          5.8         2.2  virginica
## 15           6.7         2.5          5.8         1.8  virginica
## 16           7.2         3.0          5.8         1.6  virginica
## 17           6.9         3.2          5.7         2.3  virginica
## 18           6.7         3.3          5.7         2.1  virginica
## 19           6.7         3.3          5.7         2.5  virginica
## 20           6.3         2.9          5.6         1.8  virginica
## 21           6.4         2.8          5.6         2.1  virginica
## 22           6.4         2.8          5.6         2.2  virginica
## 23           6.1         2.6          5.6         1.4  virginica
## 24           6.3         3.4          5.6         2.4  virginica
## 25           6.7         3.1          5.6         2.4  virginica
## 26           6.8         3.0          5.5         2.1  virginica
## 27           6.5         3.0          5.5         1.8  virginica
## 28           6.4          NA          5.5         1.8  virginica
## 29           6.9          NA          5.4         2.1  virginica
## 30           6.2         3.4          5.4         2.3  virginica
## 31           6.4         2.7          5.3         1.9  virginica
## 32           6.4         3.2          5.3         2.3  virginica
## 33           6.7         3.0          5.2         2.3  virginica
## 34           6.5         3.0          5.2         2.0  virginica
## 35           6.0         2.7          5.1         1.6 versicolor
## 36           5.8         2.7          5.1         1.9  virginica
## 37           6.5         3.2          5.1         2.0  virginica
## 38           5.8         2.8          5.1         2.4  virginica
## 39           6.3         2.8          5.1         1.5  virginica
## 40           6.9         3.1          5.1         2.3  virginica
## 41           5.8         2.7          5.1         1.9  virginica
## 42           5.9         3.0          5.1         1.8  virginica
## 43           6.7         3.0          5.0         1.7 versicolor
## 44           5.7         2.5          5.0         2.0  virginica
## 45           6.0         2.2          5.0         1.5  virginica
## 46           6.3         2.5          5.0         1.9  virginica
## 47           6.9         3.1          4.9         1.5 versicolor
## 48           6.3         2.5          4.9         1.5 versicolor
## 49           5.6         2.8          4.9         2.0  virginica
## 50           6.3         2.7          4.9         1.8  virginica
## 51           6.1         3.0          4.9         1.8  virginica
## 52           5.9         3.2          4.8         1.8 versicolor
## 53           6.8         2.8          4.8         1.4 versicolor
## 54           6.2         2.8          4.8         1.8  virginica
## 55           6.0         3.0          4.8         1.8  virginica
## 56           7.0         3.2          4.7         1.4 versicolor
## 57           6.3         3.3          4.7         1.6 versicolor
## 58           6.1         2.9          4.7         1.4 versicolor
## 59           6.1         2.8          4.7         1.2 versicolor
## 60           6.7         3.1          4.7         1.5 versicolor
## 61           6.5         2.8          4.6         1.5 versicolor
## 62           6.6         2.9          4.6         1.3 versicolor
## 63           6.1         3.0          4.6         1.4 versicolor
## 64           6.4         3.2          4.5         1.5 versicolor
## 65           5.7         2.8          4.5         1.3 versicolor
## 66           5.6         3.0          4.5         1.5 versicolor
## 67           6.2         2.2          4.5         1.5 versicolor
## 68           6.0         2.9          4.5         1.5 versicolor
## 69           5.4         3.0          4.5         1.5 versicolor
## 70           6.0         3.4          4.5         1.6 versicolor
## 71           4.9         2.5          4.5         1.7  virginica
## 72           6.7         3.1          4.4         1.4 versicolor
## 73           6.6         3.0          4.4         1.4 versicolor
## 74           6.3         2.3          4.4         1.3 versicolor
## 75           5.5         2.6          4.4         1.2 versicolor
## 76           6.4         2.9          4.3         1.3 versicolor
## 77           6.2         2.9          4.3         1.3 versicolor
## 78           5.9         3.0          4.2         1.5 versicolor
## 79           5.6         2.7          4.2         1.3 versicolor
## 80           5.7         3.0          4.2         1.2 versicolor
## 81           5.7         2.9          4.2         1.3 versicolor
## 82           5.8         2.7          4.1         1.0 versicolor
## 83           5.6         3.0          4.1         1.3 versicolor
## 84           5.7         2.8          4.1         1.3 versicolor
## 85           5.5         2.3          4.0         1.3 versicolor
## 86           6.0         2.2          4.0         1.0 versicolor
## 87           6.1         2.8          4.0         1.3 versicolor
## 88           5.5         2.5          4.0         1.3 versicolor
## 89           5.8         2.6          4.0         1.2 versicolor
## 90           5.2         2.7          3.9         1.4 versicolor
## 91           5.6         2.5          3.9         1.1 versicolor
## 92           5.8         2.7          3.9         1.2 versicolor
## 93           5.5         2.4          3.8         1.1 versicolor
## 94           5.5         2.4          3.7         1.0 versicolor
## 95           5.6         2.9          3.6         1.3 versicolor
## 96           5.0         2.0          3.5         1.0 versicolor
## 97           5.7         2.6          3.5         1.0 versicolor
## 98           4.9         2.4          3.3         1.0 versicolor
## 99           5.0          NA          3.3         1.0 versicolor
## 100          5.1         2.5          3.0         1.1 versicolor
## 101          4.8         3.4          1.9         0.2     setosa
## 102          5.1         3.8          1.9         0.4     setosa
## 103          5.4         3.9          1.7         0.4     setosa
## 104          5.7         3.8          1.7         0.3     setosa
## 105          5.4         3.4          1.7         0.2     setosa
## 106          5.1         3.3          1.7         0.5     setosa
## 107          4.8         3.4          1.6         0.2     setosa
## 108          5.0         3.0          1.6         0.2     setosa
## 109          5.0         3.4          1.6         0.4     setosa
## 110          4.7         3.2          1.6         0.2     setosa
## 111          4.8         3.1          1.6         0.2     setosa
## 112          5.0         3.5          1.6         0.6     setosa
## 113          5.1         3.8          1.6         0.2     setosa
## 114          4.6         3.1          1.5         0.2     setosa
## 115          5.0         3.4          1.5         0.2     setosa
## 116          4.9         3.1          1.5         0.1     setosa
## 117          5.4         3.7          1.5         0.2     setosa
## 118          5.7         4.4          1.5         0.4     setosa
## 119          5.1         3.8          1.5         0.3     setosa
## 120          5.1         3.7          1.5         0.4     setosa
## 121          5.2         3.5          1.5         0.2     setosa
## 122          5.4         3.4          1.5         0.4     setosa
## 123          5.2         4.1          1.5         0.1     setosa
## 124          4.9         3.1          1.5         0.2     setosa
## 125          5.1         3.4          1.5         0.2     setosa
## 126          5.3         3.7          1.5         0.2     setosa
## 127          5.1         3.5          1.4         0.2     setosa
## 128          4.9         3.0          1.4         0.2     setosa
## 129          5.0         3.6          1.4         0.2     setosa
## 130          4.6         3.4          1.4         0.3     setosa
## 131          4.4         2.9          1.4         0.2     setosa
## 132          4.8         3.0          1.4         0.1     setosa
## 133          5.1         3.5          1.4         0.3     setosa
## 134          5.2         3.4          1.4         0.2     setosa
## 135          5.5         4.2          1.4         0.2     setosa
## 136          4.9         3.6          1.4         0.1     setosa
## 137          4.8         3.0          1.4         0.3     setosa
## 138          4.6         3.2          1.4         0.2     setosa
## 139          5.0         3.3          1.4         0.2     setosa
## 140          4.7         3.2          1.3         0.2     setosa
## 141          5.4         3.9          1.3         0.4     setosa
## 142          5.5         3.5          1.3         0.2     setosa
## 143          4.4         3.0          1.3         0.2     setosa
## 144          5.0         3.5          1.3         0.3     setosa
## 145          4.5         2.3          1.3         0.3     setosa
## 146          4.4          NA          1.3         0.2     setosa
## 147          5.8         4.0          1.2         0.2     setosa
## 148          5.0         3.2          1.2         0.2     setosa
## 149          4.3         3.0          1.1         0.1     setosa
## 150          4.6         3.6          1.0         0.2     setosa</code></pre>
</div>
<div id="select-columns-with-select" class="section level4">
<h4>Select columns with <code>select()</code></h4>
<p>Often you work with large datasets with many columns where only a few are actually of interest to you. <code>select()</code> allows you to rapidly zoom in on a useful subset using operations that usually only work on numeric variable positions:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Select columns by name</span>
<span class="kw">select</span>(dat, Sepal.Length, Sepal.Width, Species)</code></pre>
<pre><code>##     Sepal.Length Sepal.Width    Species
## 1            5.1         3.5     setosa
## 2            4.9         3.0     setosa
## 3            4.7         3.2     setosa
## 4            4.6         3.1     setosa
## 5            5.0         3.6     setosa
## 6            5.4         3.9     setosa
## 7            4.6         3.4     setosa
## 8            5.0         3.4     setosa
## 9            4.4         2.9     setosa
## 10           4.9         3.1     setosa
## 11           5.4         3.7     setosa
## 12           4.8         3.4     setosa
## 13           4.8         3.0     setosa
## 14           4.3         3.0     setosa
## 15           5.8         4.0     setosa
## 16           5.7         4.4     setosa
## 17           5.4         3.9     setosa
## 18           5.1         3.5     setosa
## 19           5.7         3.8     setosa
## 20           5.1         3.8     setosa
## 21           5.4         3.4     setosa
## 22           5.1         3.7     setosa
## 23           4.6         3.6     setosa
## 24           5.1         3.3     setosa
## 25           4.8         3.4     setosa
## 26           5.0         3.0     setosa
## 27           5.0         3.4     setosa
## 28           5.2         3.5     setosa
## 29           5.2         3.4     setosa
## 30           4.7         3.2     setosa
## 31           4.8         3.1     setosa
## 32           5.4         3.4     setosa
## 33           5.2         4.1     setosa
## 34           5.5         4.2     setosa
## 35           4.9         3.1     setosa
## 36           5.0         3.2     setosa
## 37           5.5         3.5     setosa
## 38           4.9         3.6     setosa
## 39           4.4         3.0     setosa
## 40           5.1         3.4     setosa
## 41           5.0         3.5     setosa
## 42           4.5         2.3     setosa
## 43           4.4          NA     setosa
## 44           5.0         3.5     setosa
## 45           5.1         3.8     setosa
## 46           4.8         3.0     setosa
## 47           5.1         3.8     setosa
## 48           4.6         3.2     setosa
## 49           5.3         3.7     setosa
## 50           5.0         3.3     setosa
## 51           7.0         3.2 versicolor
## 52           6.4         3.2 versicolor
## 53           6.9         3.1 versicolor
## 54           5.5         2.3 versicolor
## 55           6.5         2.8 versicolor
## 56           5.7         2.8 versicolor
## 57           6.3         3.3 versicolor
## 58           4.9         2.4 versicolor
## 59           6.6         2.9 versicolor
## 60           5.2         2.7 versicolor
## 61           5.0         2.0 versicolor
## 62           5.9         3.0 versicolor
## 63           6.0         2.2 versicolor
## 64           6.1         2.9 versicolor
## 65           5.6         2.9 versicolor
## 66           6.7         3.1 versicolor
## 67           5.6         3.0 versicolor
## 68           5.8         2.7 versicolor
## 69           6.2         2.2 versicolor
## 70           5.6         2.5 versicolor
## 71           5.9         3.2 versicolor
## 72           6.1         2.8 versicolor
## 73           6.3         2.5 versicolor
## 74           6.1         2.8 versicolor
## 75           6.4         2.9 versicolor
## 76           6.6         3.0 versicolor
## 77           6.8         2.8 versicolor
## 78           6.7         3.0 versicolor
## 79           6.0         2.9 versicolor
## 80           5.7         2.6 versicolor
## 81           5.5         2.4 versicolor
## 82           5.5         2.4 versicolor
## 83           5.8         2.7 versicolor
## 84           6.0         2.7 versicolor
## 85           5.4         3.0 versicolor
## 86           6.0         3.4 versicolor
## 87           6.7         3.1 versicolor
## 88           6.3         2.3 versicolor
## 89           5.6         3.0 versicolor
## 90           5.5         2.5 versicolor
## 91           5.5         2.6 versicolor
## 92           6.1         3.0 versicolor
## 93           5.8         2.6 versicolor
## 94           5.0          NA versicolor
## 95           5.6         2.7 versicolor
## 96           5.7         3.0 versicolor
## 97           5.7         2.9 versicolor
## 98           6.2         2.9 versicolor
## 99           5.1         2.5 versicolor
## 100          5.7         2.8 versicolor
## 101          6.3         3.3  virginica
## 102          5.8         2.7  virginica
## 103          7.1         3.0  virginica
## 104          6.3         2.9  virginica
## 105          6.5         3.0  virginica
## 106          7.6         3.0  virginica
## 107          4.9         2.5  virginica
## 108          7.3         2.9  virginica
## 109          6.7         2.5  virginica
## 110          7.2         3.6  virginica
## 111          6.5         3.2  virginica
## 112          6.4         2.7  virginica
## 113          6.8         3.0  virginica
## 114          5.7         2.5  virginica
## 115          5.8         2.8  virginica
## 116          6.4         3.2  virginica
## 117          6.5         3.0  virginica
## 118          7.7         3.8  virginica
## 119          7.7         2.6  virginica
## 120          6.0         2.2  virginica
## 121          6.9         3.2  virginica
## 122          5.6         2.8  virginica
## 123          7.7          NA  virginica
## 124          6.3         2.7  virginica
## 125          6.7         3.3  virginica
## 126          7.2         3.2  virginica
## 127          6.2         2.8  virginica
## 128          6.1         3.0  virginica
## 129          6.4         2.8  virginica
## 130          7.2         3.0  virginica
## 131          7.4         2.8  virginica
## 132          7.9         3.8  virginica
## 133          6.4         2.8  virginica
## 134          6.3         2.8  virginica
## 135          6.1         2.6  virginica
## 136          7.7         3.0  virginica
## 137          6.3         3.4  virginica
## 138          6.4          NA  virginica
## 139          6.0         3.0  virginica
## 140          6.9          NA  virginica
## 141          6.7         3.1  virginica
## 142          6.9         3.1  virginica
## 143          5.8         2.7  virginica
## 144          6.8         3.2  virginica
## 145          6.7         3.3  virginica
## 146          6.7         3.0  virginica
## 147          6.3         2.5  virginica
## 148          6.5         3.0  virginica
## 149          6.2         3.4  virginica
## 150          5.9         3.0  virginica</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Select all columns between Petal.Length and Species (inclusive)</span>
<span class="kw">select</span>(dat, Petal.Length:Species)</code></pre>
<pre><code>##     Petal.Length Petal.Width    Species
## 1            1.4         0.2     setosa
## 2            1.4         0.2     setosa
## 3            1.3         0.2     setosa
## 4            1.5         0.2     setosa
## 5            1.4         0.2     setosa
## 6            1.7         0.4     setosa
## 7            1.4         0.3     setosa
## 8            1.5         0.2     setosa
## 9            1.4         0.2     setosa
## 10           1.5         0.1     setosa
## 11           1.5         0.2     setosa
## 12           1.6         0.2     setosa
## 13           1.4         0.1     setosa
## 14           1.1         0.1     setosa
## 15           1.2         0.2     setosa
## 16           1.5         0.4     setosa
## 17           1.3         0.4     setosa
## 18           1.4         0.3     setosa
## 19           1.7         0.3     setosa
## 20           1.5         0.3     setosa
## 21           1.7         0.2     setosa
## 22           1.5         0.4     setosa
## 23           1.0         0.2     setosa
## 24           1.7         0.5     setosa
## 25           1.9         0.2     setosa
## 26           1.6         0.2     setosa
## 27           1.6         0.4     setosa
## 28           1.5         0.2     setosa
## 29           1.4         0.2     setosa
## 30           1.6         0.2     setosa
## 31           1.6         0.2     setosa
## 32           1.5         0.4     setosa
## 33           1.5         0.1     setosa
## 34           1.4         0.2     setosa
## 35           1.5         0.2     setosa
## 36           1.2         0.2     setosa
## 37           1.3         0.2     setosa
## 38           1.4         0.1     setosa
## 39           1.3         0.2     setosa
## 40           1.5         0.2     setosa
## 41           1.3         0.3     setosa
## 42           1.3         0.3     setosa
## 43           1.3         0.2     setosa
## 44           1.6         0.6     setosa
## 45           1.9         0.4     setosa
## 46           1.4         0.3     setosa
## 47           1.6         0.2     setosa
## 48           1.4         0.2     setosa
## 49           1.5         0.2     setosa
## 50           1.4         0.2     setosa
## 51           4.7         1.4 versicolor
## 52           4.5         1.5 versicolor
## 53           4.9         1.5 versicolor
## 54           4.0         1.3 versicolor
## 55           4.6         1.5 versicolor
## 56           4.5         1.3 versicolor
## 57           4.7         1.6 versicolor
## 58           3.3         1.0 versicolor
## 59           4.6         1.3 versicolor
## 60           3.9         1.4 versicolor
## 61           3.5         1.0 versicolor
## 62           4.2         1.5 versicolor
## 63           4.0         1.0 versicolor
## 64           4.7         1.4 versicolor
## 65           3.6         1.3 versicolor
## 66           4.4         1.4 versicolor
## 67           4.5         1.5 versicolor
## 68           4.1         1.0 versicolor
## 69           4.5         1.5 versicolor
## 70           3.9         1.1 versicolor
## 71           4.8         1.8 versicolor
## 72           4.0         1.3 versicolor
## 73           4.9         1.5 versicolor
## 74           4.7         1.2 versicolor
## 75           4.3         1.3 versicolor
## 76           4.4         1.4 versicolor
## 77           4.8         1.4 versicolor
## 78           5.0         1.7 versicolor
## 79           4.5         1.5 versicolor
## 80           3.5         1.0 versicolor
## 81           3.8         1.1 versicolor
## 82           3.7         1.0 versicolor
## 83           3.9         1.2 versicolor
## 84           5.1         1.6 versicolor
## 85           4.5         1.5 versicolor
## 86           4.5         1.6 versicolor
## 87           4.7         1.5 versicolor
## 88           4.4         1.3 versicolor
## 89           4.1         1.3 versicolor
## 90           4.0         1.3 versicolor
## 91           4.4         1.2 versicolor
## 92           4.6         1.4 versicolor
## 93           4.0         1.2 versicolor
## 94           3.3         1.0 versicolor
## 95           4.2         1.3 versicolor
## 96           4.2         1.2 versicolor
## 97           4.2         1.3 versicolor
## 98           4.3         1.3 versicolor
## 99           3.0         1.1 versicolor
## 100          4.1         1.3 versicolor
## 101          6.0         2.5  virginica
## 102          5.1         1.9  virginica
## 103          5.9         2.1  virginica
## 104          5.6         1.8  virginica
## 105          5.8         2.2  virginica
## 106          6.6         2.1  virginica
## 107          4.5         1.7  virginica
## 108          6.3         1.8  virginica
## 109          5.8         1.8  virginica
## 110          6.1         2.5  virginica
## 111          5.1         2.0  virginica
## 112          5.3         1.9  virginica
## 113          5.5         2.1  virginica
## 114          5.0         2.0  virginica
## 115          5.1         2.4  virginica
## 116          5.3         2.3  virginica
## 117          5.5         1.8  virginica
## 118          6.7         2.2  virginica
## 119          6.9         2.3  virginica
## 120          5.0         1.5  virginica
## 121          5.7         2.3  virginica
## 122          4.9         2.0  virginica
## 123          6.7         2.0  virginica
## 124          4.9         1.8  virginica
## 125          5.7         2.1  virginica
## 126          6.0         1.8  virginica
## 127          4.8         1.8  virginica
## 128          4.9         1.8  virginica
## 129          5.6         2.1  virginica
## 130          5.8         1.6  virginica
## 131          6.1         1.9  virginica
## 132          6.4         2.0  virginica
## 133          5.6         2.2  virginica
## 134          5.1         1.5  virginica
## 135          5.6         1.4  virginica
## 136          6.1         2.3  virginica
## 137          5.6         2.4  virginica
## 138          5.5         1.8  virginica
## 139          4.8         1.8  virginica
## 140          5.4         2.1  virginica
## 141          5.6         2.4  virginica
## 142          5.1         2.3  virginica
## 143          5.1         1.9  virginica
## 144          5.9         2.3  virginica
## 145          5.7         2.5  virginica
## 146          5.2         2.3  virginica
## 147          5.0         1.9  virginica
## 148          5.2         2.0  virginica
## 149          5.4         2.3  virginica
## 150          5.1         1.8  virginica</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Select all columns except the last two (inclusive)</span>
<span class="kw">select</span>(dat, -(Sepal.Length:Sepal.Width))</code></pre>
<pre><code>##     Petal.Length Petal.Width    Species
## 1            1.4         0.2     setosa
## 2            1.4         0.2     setosa
## 3            1.3         0.2     setosa
## 4            1.5         0.2     setosa
## 5            1.4         0.2     setosa
## 6            1.7         0.4     setosa
## 7            1.4         0.3     setosa
## 8            1.5         0.2     setosa
## 9            1.4         0.2     setosa
## 10           1.5         0.1     setosa
## 11           1.5         0.2     setosa
## 12           1.6         0.2     setosa
## 13           1.4         0.1     setosa
## 14           1.1         0.1     setosa
## 15           1.2         0.2     setosa
## 16           1.5         0.4     setosa
## 17           1.3         0.4     setosa
## 18           1.4         0.3     setosa
## 19           1.7         0.3     setosa
## 20           1.5         0.3     setosa
## 21           1.7         0.2     setosa
## 22           1.5         0.4     setosa
## 23           1.0         0.2     setosa
## 24           1.7         0.5     setosa
## 25           1.9         0.2     setosa
## 26           1.6         0.2     setosa
## 27           1.6         0.4     setosa
## 28           1.5         0.2     setosa
## 29           1.4         0.2     setosa
## 30           1.6         0.2     setosa
## 31           1.6         0.2     setosa
## 32           1.5         0.4     setosa
## 33           1.5         0.1     setosa
## 34           1.4         0.2     setosa
## 35           1.5         0.2     setosa
## 36           1.2         0.2     setosa
## 37           1.3         0.2     setosa
## 38           1.4         0.1     setosa
## 39           1.3         0.2     setosa
## 40           1.5         0.2     setosa
## 41           1.3         0.3     setosa
## 42           1.3         0.3     setosa
## 43           1.3         0.2     setosa
## 44           1.6         0.6     setosa
## 45           1.9         0.4     setosa
## 46           1.4         0.3     setosa
## 47           1.6         0.2     setosa
## 48           1.4         0.2     setosa
## 49           1.5         0.2     setosa
## 50           1.4         0.2     setosa
## 51           4.7         1.4 versicolor
## 52           4.5         1.5 versicolor
## 53           4.9         1.5 versicolor
## 54           4.0         1.3 versicolor
## 55           4.6         1.5 versicolor
## 56           4.5         1.3 versicolor
## 57           4.7         1.6 versicolor
## 58           3.3         1.0 versicolor
## 59           4.6         1.3 versicolor
## 60           3.9         1.4 versicolor
## 61           3.5         1.0 versicolor
## 62           4.2         1.5 versicolor
## 63           4.0         1.0 versicolor
## 64           4.7         1.4 versicolor
## 65           3.6         1.3 versicolor
## 66           4.4         1.4 versicolor
## 67           4.5         1.5 versicolor
## 68           4.1         1.0 versicolor
## 69           4.5         1.5 versicolor
## 70           3.9         1.1 versicolor
## 71           4.8         1.8 versicolor
## 72           4.0         1.3 versicolor
## 73           4.9         1.5 versicolor
## 74           4.7         1.2 versicolor
## 75           4.3         1.3 versicolor
## 76           4.4         1.4 versicolor
## 77           4.8         1.4 versicolor
## 78           5.0         1.7 versicolor
## 79           4.5         1.5 versicolor
## 80           3.5         1.0 versicolor
## 81           3.8         1.1 versicolor
## 82           3.7         1.0 versicolor
## 83           3.9         1.2 versicolor
## 84           5.1         1.6 versicolor
## 85           4.5         1.5 versicolor
## 86           4.5         1.6 versicolor
## 87           4.7         1.5 versicolor
## 88           4.4         1.3 versicolor
## 89           4.1         1.3 versicolor
## 90           4.0         1.3 versicolor
## 91           4.4         1.2 versicolor
## 92           4.6         1.4 versicolor
## 93           4.0         1.2 versicolor
## 94           3.3         1.0 versicolor
## 95           4.2         1.3 versicolor
## 96           4.2         1.2 versicolor
## 97           4.2         1.3 versicolor
## 98           4.3         1.3 versicolor
## 99           3.0         1.1 versicolor
## 100          4.1         1.3 versicolor
## 101          6.0         2.5  virginica
## 102          5.1         1.9  virginica
## 103          5.9         2.1  virginica
## 104          5.6         1.8  virginica
## 105          5.8         2.2  virginica
## 106          6.6         2.1  virginica
## 107          4.5         1.7  virginica
## 108          6.3         1.8  virginica
## 109          5.8         1.8  virginica
## 110          6.1         2.5  virginica
## 111          5.1         2.0  virginica
## 112          5.3         1.9  virginica
## 113          5.5         2.1  virginica
## 114          5.0         2.0  virginica
## 115          5.1         2.4  virginica
## 116          5.3         2.3  virginica
## 117          5.5         1.8  virginica
## 118          6.7         2.2  virginica
## 119          6.9         2.3  virginica
## 120          5.0         1.5  virginica
## 121          5.7         2.3  virginica
## 122          4.9         2.0  virginica
## 123          6.7         2.0  virginica
## 124          4.9         1.8  virginica
## 125          5.7         2.1  virginica
## 126          6.0         1.8  virginica
## 127          4.8         1.8  virginica
## 128          4.9         1.8  virginica
## 129          5.6         2.1  virginica
## 130          5.8         1.6  virginica
## 131          6.1         1.9  virginica
## 132          6.4         2.0  virginica
## 133          5.6         2.2  virginica
## 134          5.1         1.5  virginica
## 135          5.6         1.4  virginica
## 136          6.1         2.3  virginica
## 137          5.6         2.4  virginica
## 138          5.5         1.8  virginica
## 139          4.8         1.8  virginica
## 140          5.4         2.1  virginica
## 141          5.6         2.4  virginica
## 142          5.1         2.3  virginica
## 143          5.1         1.9  virginica
## 144          5.9         2.3  virginica
## 145          5.7         2.5  virginica
## 146          5.2         2.3  virginica
## 147          5.0         1.9  virginica
## 148          5.2         2.0  virginica
## 149          5.4         2.3  virginica
## 150          5.1         1.8  virginica</code></pre>
</div>
<div id="add-new-columns-with-mutate" class="section level4">
<h4>Add new columns with <code>mutate()</code></h4>
<p>As well as selecting from the set of existing columns, it’s often useful to add new columns that are functions of existing columns. This is the job of <code>mutate()</code>:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mutate</span>(dat,
  <span class="dt">Petal.Ratio =</span> Petal.Length /<span class="st"> </span>Petal.Width,
  <span class="dt">Sepal.Ratio =</span> Sepal.Length /<span class="st"> </span>Sepal.Width)</code></pre>
<pre><code>##     Sepal.Length Sepal.Width Petal.Length Petal.Width    Species
## 1            5.1         3.5          1.4         0.2     setosa
## 2            4.9         3.0          1.4         0.2     setosa
## 3            4.7         3.2          1.3         0.2     setosa
## 4            4.6         3.1          1.5         0.2     setosa
## 5            5.0         3.6          1.4         0.2     setosa
## 6            5.4         3.9          1.7         0.4     setosa
## 7            4.6         3.4          1.4         0.3     setosa
## 8            5.0         3.4          1.5         0.2     setosa
## 9            4.4         2.9          1.4         0.2     setosa
## 10           4.9         3.1          1.5         0.1     setosa
## 11           5.4         3.7          1.5         0.2     setosa
## 12           4.8         3.4          1.6         0.2     setosa
## 13           4.8         3.0          1.4         0.1     setosa
## 14           4.3         3.0          1.1         0.1     setosa
## 15           5.8         4.0          1.2         0.2     setosa
## 16           5.7         4.4          1.5         0.4     setosa
## 17           5.4         3.9          1.3         0.4     setosa
## 18           5.1         3.5          1.4         0.3     setosa
## 19           5.7         3.8          1.7         0.3     setosa
## 20           5.1         3.8          1.5         0.3     setosa
## 21           5.4         3.4          1.7         0.2     setosa
## 22           5.1         3.7          1.5         0.4     setosa
## 23           4.6         3.6          1.0         0.2     setosa
## 24           5.1         3.3          1.7         0.5     setosa
## 25           4.8         3.4          1.9         0.2     setosa
## 26           5.0         3.0          1.6         0.2     setosa
## 27           5.0         3.4          1.6         0.4     setosa
## 28           5.2         3.5          1.5         0.2     setosa
## 29           5.2         3.4          1.4         0.2     setosa
## 30           4.7         3.2          1.6         0.2     setosa
## 31           4.8         3.1          1.6         0.2     setosa
## 32           5.4         3.4          1.5         0.4     setosa
## 33           5.2         4.1          1.5         0.1     setosa
## 34           5.5         4.2          1.4         0.2     setosa
## 35           4.9         3.1          1.5         0.2     setosa
## 36           5.0         3.2          1.2         0.2     setosa
## 37           5.5         3.5          1.3         0.2     setosa
## 38           4.9         3.6          1.4         0.1     setosa
## 39           4.4         3.0          1.3         0.2     setosa
## 40           5.1         3.4          1.5         0.2     setosa
## 41           5.0         3.5          1.3         0.3     setosa
## 42           4.5         2.3          1.3         0.3     setosa
## 43           4.4          NA          1.3         0.2     setosa
## 44           5.0         3.5          1.6         0.6     setosa
## 45           5.1         3.8          1.9         0.4     setosa
## 46           4.8         3.0          1.4         0.3     setosa
## 47           5.1         3.8          1.6         0.2     setosa
## 48           4.6         3.2          1.4         0.2     setosa
## 49           5.3         3.7          1.5         0.2     setosa
## 50           5.0         3.3          1.4         0.2     setosa
## 51           7.0         3.2          4.7         1.4 versicolor
## 52           6.4         3.2          4.5         1.5 versicolor
## 53           6.9         3.1          4.9         1.5 versicolor
## 54           5.5         2.3          4.0         1.3 versicolor
## 55           6.5         2.8          4.6         1.5 versicolor
## 56           5.7         2.8          4.5         1.3 versicolor
## 57           6.3         3.3          4.7         1.6 versicolor
## 58           4.9         2.4          3.3         1.0 versicolor
## 59           6.6         2.9          4.6         1.3 versicolor
## 60           5.2         2.7          3.9         1.4 versicolor
## 61           5.0         2.0          3.5         1.0 versicolor
## 62           5.9         3.0          4.2         1.5 versicolor
## 63           6.0         2.2          4.0         1.0 versicolor
## 64           6.1         2.9          4.7         1.4 versicolor
## 65           5.6         2.9          3.6         1.3 versicolor
## 66           6.7         3.1          4.4         1.4 versicolor
## 67           5.6         3.0          4.5         1.5 versicolor
## 68           5.8         2.7          4.1         1.0 versicolor
## 69           6.2         2.2          4.5         1.5 versicolor
## 70           5.6         2.5          3.9         1.1 versicolor
## 71           5.9         3.2          4.8         1.8 versicolor
## 72           6.1         2.8          4.0         1.3 versicolor
## 73           6.3         2.5          4.9         1.5 versicolor
## 74           6.1         2.8          4.7         1.2 versicolor
## 75           6.4         2.9          4.3         1.3 versicolor
## 76           6.6         3.0          4.4         1.4 versicolor
## 77           6.8         2.8          4.8         1.4 versicolor
## 78           6.7         3.0          5.0         1.7 versicolor
## 79           6.0         2.9          4.5         1.5 versicolor
## 80           5.7         2.6          3.5         1.0 versicolor
## 81           5.5         2.4          3.8         1.1 versicolor
## 82           5.5         2.4          3.7         1.0 versicolor
## 83           5.8         2.7          3.9         1.2 versicolor
## 84           6.0         2.7          5.1         1.6 versicolor
## 85           5.4         3.0          4.5         1.5 versicolor
## 86           6.0         3.4          4.5         1.6 versicolor
## 87           6.7         3.1          4.7         1.5 versicolor
## 88           6.3         2.3          4.4         1.3 versicolor
## 89           5.6         3.0          4.1         1.3 versicolor
## 90           5.5         2.5          4.0         1.3 versicolor
## 91           5.5         2.6          4.4         1.2 versicolor
## 92           6.1         3.0          4.6         1.4 versicolor
## 93           5.8         2.6          4.0         1.2 versicolor
## 94           5.0          NA          3.3         1.0 versicolor
## 95           5.6         2.7          4.2         1.3 versicolor
## 96           5.7         3.0          4.2         1.2 versicolor
## 97           5.7         2.9          4.2         1.3 versicolor
## 98           6.2         2.9          4.3         1.3 versicolor
## 99           5.1         2.5          3.0         1.1 versicolor
## 100          5.7         2.8          4.1         1.3 versicolor
## 101          6.3         3.3          6.0         2.5  virginica
## 102          5.8         2.7          5.1         1.9  virginica
## 103          7.1         3.0          5.9         2.1  virginica
## 104          6.3         2.9          5.6         1.8  virginica
## 105          6.5         3.0          5.8         2.2  virginica
## 106          7.6         3.0          6.6         2.1  virginica
## 107          4.9         2.5          4.5         1.7  virginica
## 108          7.3         2.9          6.3         1.8  virginica
## 109          6.7         2.5          5.8         1.8  virginica
## 110          7.2         3.6          6.1         2.5  virginica
## 111          6.5         3.2          5.1         2.0  virginica
## 112          6.4         2.7          5.3         1.9  virginica
## 113          6.8         3.0          5.5         2.1  virginica
## 114          5.7         2.5          5.0         2.0  virginica
## 115          5.8         2.8          5.1         2.4  virginica
## 116          6.4         3.2          5.3         2.3  virginica
## 117          6.5         3.0          5.5         1.8  virginica
## 118          7.7         3.8          6.7         2.2  virginica
## 119          7.7         2.6          6.9         2.3  virginica
## 120          6.0         2.2          5.0         1.5  virginica
## 121          6.9         3.2          5.7         2.3  virginica
## 122          5.6         2.8          4.9         2.0  virginica
## 123          7.7          NA          6.7         2.0  virginica
## 124          6.3         2.7          4.9         1.8  virginica
## 125          6.7         3.3          5.7         2.1  virginica
## 126          7.2         3.2          6.0         1.8  virginica
## 127          6.2         2.8          4.8         1.8  virginica
## 128          6.1         3.0          4.9         1.8  virginica
## 129          6.4         2.8          5.6         2.1  virginica
## 130          7.2         3.0          5.8         1.6  virginica
## 131          7.4         2.8          6.1         1.9  virginica
## 132          7.9         3.8          6.4         2.0  virginica
## 133          6.4         2.8          5.6         2.2  virginica
## 134          6.3         2.8          5.1         1.5  virginica
## 135          6.1         2.6          5.6         1.4  virginica
## 136          7.7         3.0          6.1         2.3  virginica
## 137          6.3         3.4          5.6         2.4  virginica
## 138          6.4          NA          5.5         1.8  virginica
## 139          6.0         3.0          4.8         1.8  virginica
## 140          6.9          NA          5.4         2.1  virginica
## 141          6.7         3.1          5.6         2.4  virginica
## 142          6.9         3.1          5.1         2.3  virginica
## 143          5.8         2.7          5.1         1.9  virginica
## 144          6.8         3.2          5.9         2.3  virginica
## 145          6.7         3.3          5.7         2.5  virginica
## 146          6.7         3.0          5.2         2.3  virginica
## 147          6.3         2.5          5.0         1.9  virginica
## 148          6.5         3.0          5.2         2.0  virginica
## 149          6.2         3.4          5.4         2.3  virginica
## 150          5.9         3.0          5.1         1.8  virginica
##     Petal.Ratio Sepal.Ratio
## 1         7.000       1.457
## 2         7.000       1.633
## 3         6.500       1.469
## 4         7.500       1.484
## 5         7.000       1.389
## 6         4.250       1.385
## 7         4.667       1.353
## 8         7.500       1.471
## 9         7.000       1.517
## 10       15.000       1.581
## 11        7.500       1.459
## 12        8.000       1.412
## 13       14.000       1.600
## 14       11.000       1.433
## 15        6.000       1.450
## 16        3.750       1.295
## 17        3.250       1.385
## 18        4.667       1.457
## 19        5.667       1.500
## 20        5.000       1.342
## 21        8.500       1.588
## 22        3.750       1.378
## 23        5.000       1.278
## 24        3.400       1.545
## 25        9.500       1.412
## 26        8.000       1.667
## 27        4.000       1.471
## 28        7.500       1.486
## 29        7.000       1.529
## 30        8.000       1.469
## 31        8.000       1.548
## 32        3.750       1.588
## 33       15.000       1.268
## 34        7.000       1.310
## 35        7.500       1.581
## 36        6.000       1.562
## 37        6.500       1.571
## 38       14.000       1.361
## 39        6.500       1.467
## 40        7.500       1.500
## 41        4.333       1.429
## 42        4.333       1.957
## 43        6.500          NA
## 44        2.667       1.429
## 45        4.750       1.342
## 46        4.667       1.600
## 47        8.000       1.342
## 48        7.000       1.437
## 49        7.500       1.432
## 50        7.000       1.515
## 51        3.357       2.188
## 52        3.000       2.000
## 53        3.267       2.226
## 54        3.077       2.391
## 55        3.067       2.321
## 56        3.462       2.036
## 57        2.938       1.909
## 58        3.300       2.042
## 59        3.538       2.276
## 60        2.786       1.926
## 61        3.500       2.500
## 62        2.800       1.967
## 63        4.000       2.727
## 64        3.357       2.103
## 65        2.769       1.931
## 66        3.143       2.161
## 67        3.000       1.867
## 68        4.100       2.148
## 69        3.000       2.818
## 70        3.545       2.240
## 71        2.667       1.844
## 72        3.077       2.179
## 73        3.267       2.520
## 74        3.917       2.179
## 75        3.308       2.207
## 76        3.143       2.200
## 77        3.429       2.429
## 78        2.941       2.233
## 79        3.000       2.069
## 80        3.500       2.192
## 81        3.455       2.292
## 82        3.700       2.292
## 83        3.250       2.148
## 84        3.187       2.222
## 85        3.000       1.800
## 86        2.812       1.765
## 87        3.133       2.161
## 88        3.385       2.739
## 89        3.154       1.867
## 90        3.077       2.200
## 91        3.667       2.115
## 92        3.286       2.033
## 93        3.333       2.231
## 94        3.300          NA
## 95        3.231       2.074
## 96        3.500       1.900
## 97        3.231       1.966
## 98        3.308       2.138
## 99        2.727       2.040
## 100       3.154       2.036
## 101       2.400       1.909
## 102       2.684       2.148
## 103       2.810       2.367
## 104       3.111       2.172
## 105       2.636       2.167
## 106       3.143       2.533
## 107       2.647       1.960
## 108       3.500       2.517
## 109       3.222       2.680
## 110       2.440       2.000
## 111       2.550       2.031
## 112       2.789       2.370
## 113       2.619       2.267
## 114       2.500       2.280
## 115       2.125       2.071
## 116       2.304       2.000
## 117       3.056       2.167
## 118       3.045       2.026
## 119       3.000       2.962
## 120       3.333       2.727
## 121       2.478       2.156
## 122       2.450       2.000
## 123       3.350          NA
## 124       2.722       2.333
## 125       2.714       2.030
## 126       3.333       2.250
## 127       2.667       2.214
## 128       2.722       2.033
## 129       2.667       2.286
## 130       3.625       2.400
## 131       3.211       2.643
## 132       3.200       2.079
## 133       2.545       2.286
## 134       3.400       2.250
## 135       4.000       2.346
## 136       2.652       2.567
## 137       2.333       1.853
## 138       3.056          NA
## 139       2.667       2.000
## 140       2.571          NA
## 141       2.333       2.161
## 142       2.217       2.226
## 143       2.684       2.148
## 144       2.565       2.125
## 145       2.280       2.030
## 146       2.261       2.233
## 147       2.632       2.520
## 148       2.600       2.167
## 149       2.348       1.824
## 150       2.833       1.967</code></pre>
</div>
<div id="summarise-values-with-summarise" class="section level4">
<h4>Summarise values with <code>summarise()</code></h4>
<p>The last verb is <code>summarise()</code>, which collapses a data frame to a single row. It’s not very useful (yet):</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summarise</span>(dat, <span class="dt">mean.Petal.Length =</span> <span class="kw">mean</span>(Petal.Length, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</code></pre>
<pre><code>##   mean.Petal.Length
## 1             3.758</code></pre>
<p>_Notice that we haven’t been assigning these things to any objects, so they just print out to the console and then are gone.</p>
<p>You may have noticed that all these functions are very similar:</p>
<ul>
<li><p>The first argument is a data frame.</p></li>
<li><p>The subsequent arguments describe what to do with it, and you can refer to columns in the data frame directly without using <code>$</code>.</p></li>
<li><p>The result is a new data frame</p></li>
</ul>
<p>These five functions provide the basis of a language of data manipulation. At the most basic level, you can only alter a tidy data frame in five useful ways: you can reorder the rows (<code>arrange()</code>), pick observations and variables of interest (<code>filter()</code> and <code>select()</code>), add new variables that are functions of existing variables (<code>mutate()</code>) or collapse many values to a summary (<code>summarise()</code>). The remainder of the language comes from applying the five functions to different types of data, like to grouped data, as described next.</p>
<p>It’s used for the <strong>split, apply, combine</strong> approach to data manipulation: You <strong>split</strong> a dataset by some variable, <strong>apply</strong> some operation(s) to each piece, and <strong>combine</strong> the pieces back together.</p>
<p>We’ll use this to generate some <em>per-species</em> statistics, because the mean of some measurement across all species isn’t that meaningful.</p>
<pre class="sourceCode r"><code class="sourceCode r">grp_spp &lt;-<span class="st"> </span><span class="kw">group_by</span>(dat, Species)

<span class="kw">summarise</span>(grp_spp, 
          <span class="dt">mean.Petal.Length =</span> <span class="kw">mean</span>(Petal.Length), 
          <span class="dt">sd.Petal.Length =</span> <span class="kw">sd</span>(Petal.Length))</code></pre>
<pre><code>## Source: local data frame [3 x 3]
## 
##      Species mean.Petal.Length sd.Petal.Length
## 1     setosa             1.462          0.1737
## 2 versicolor             4.260          0.4699
## 3  virginica             5.552          0.5519</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mutate</span>(grp_spp, <span class="dt">SL.mean.ratio =</span> Sepal.Length /<span class="st"> </span><span class="kw">mean</span>(Sepal.Length))</code></pre>
<pre><code>## Source: local data frame [150 x 6]
## Groups: Species
## 
##    Sepal.Length Sepal.Width Petal.Length Petal.Width Species SL.mean.ratio
## 1           5.1         3.5          1.4         0.2  setosa        1.0188
## 2           4.9         3.0          1.4         0.2  setosa        0.9788
## 3           4.7         3.2          1.3         0.2  setosa        0.9389
## 4           4.6         3.1          1.5         0.2  setosa        0.9189
## 5           5.0         3.6          1.4         0.2  setosa        0.9988
## 6           5.4         3.9          1.7         0.4  setosa        1.0787
## 7           4.6         3.4          1.4         0.3  setosa        0.9189
## 8           5.0         3.4          1.5         0.2  setosa        0.9988
## 9           4.4         2.9          1.4         0.2  setosa        0.8789
## 10          4.9         3.1          1.5         0.1  setosa        0.9788
## ..          ...         ...          ...         ...     ...           ...</code></pre>
<p>This is nice and handy, but what if we want to do several operations that depend on the result of a previous operation? We want to group by species, use only the individuals that have a Sepal Length longer than 5cm, calculate the number of each species that meet those criteria, then calculate the mean and standard deviation of petal length for each species.</p>
<pre class="sourceCode r"><code class="sourceCode r">grp_spp &lt;-<span class="st"> </span><span class="kw">group_by</span>(dat, Species)
temp1 &lt;-<span class="st"> </span><span class="kw">filter</span>(grp_spp, Sepal.Length &gt;<span class="dv">5</span>)
temp2 &lt;-<span class="st"> </span><span class="kw">mutate</span>(temp1, <span class="dt">n=</span><span class="kw">n</span>()) <span class="co"># n(): number of observations in the current group</span>
summary_dat &lt;-<span class="st"> </span><span class="kw">summarise</span>(temp2, 
                        <span class="dt">mean.Petal.Length =</span> <span class="kw">mean</span>(Petal.Length), 
                        <span class="dt">sd.Petal.Length =</span> <span class="kw">sd</span>(Petal.Length))</code></pre>
<p>you can also chain these things together by using the <code>%&gt;%</code> operator. This helps make your code very readable, and eliminates the need to create intermediate objects.</p>
<p><code>x %&gt;% f(y)</code> turns into <code>f(x, y)</code> so you can use it to write multiple operations so you can read from left-to-right, top-to-bottom:</p>
<pre class="sourceCode r"><code class="sourceCode r">sum_dat &lt;-<span class="st"> </span>dat %&gt;%
<span class="st">  </span><span class="kw">group_by</span>(Species) %&gt;%
<span class="st">  </span><span class="kw">filter</span>(Sepal.Length &gt;<span class="st"> </span><span class="dv">5</span>) %&gt;%
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">n =</span> <span class="kw">n</span>()) %&gt;%<span class="st">           </span><span class="co"># n(): number of observations in the current group</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">mean.Petal.Length =</span> <span class="kw">mean</span>(Petal.Length), 
            <span class="dt">sd.Petal.Length =</span> <span class="kw">sd</span>(Petal.Length))</code></pre>
<p>Note that the NA in Sepal.Width crept back in. We can specify na.rm by using the <code>.</code> operator; this specifies where the values from preceding operation go (the default; i.e., without using the <code>.</code>, is the first position).</p>
<pre class="sourceCode r"><code class="sourceCode r">sum_dat &lt;-<span class="st"> </span>dat %&gt;%
<span class="st">  </span><span class="kw">group_by</span>(Species) %&gt;%
<span class="st">  </span><span class="kw">filter</span>(Sepal.Length &gt;<span class="st"> </span><span class="dv">5</span>) %&gt;%
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">n =</span> <span class="kw">n</span>()) %&gt;%
<span class="st">  </span><span class="kw">summarise_each</span>(<span class="kw">funs</span>(<span class="kw">mean</span>(., <span class="dt">na.rm=</span><span class="ot">TRUE</span>)))</code></pre>
<p>Let’s check if we got the same answer:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">all.equal</span>(sum_dat, summary_dat)</code></pre>
<pre><code>## [1] &quot;Cols in y but not x: sd.Petal.Length, mean.Petal.LengthCols in x but not y: Sepal.Width, n, Petal.Length, Petal.Width, Sepal.Length&quot;</code></pre>
<p>Now let’s clean up a bit. See all objects in your workspace with <code>ls()</code>. You also see these things in your environment pane in RStudio.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ls</span>()</code></pre>
<pre><code>## [1] &quot;dat&quot;         &quot;grp_spp&quot;     &quot;metadata&quot;    &quot;sum_dat&quot;     &quot;summary_dat&quot;
## [6] &quot;temp1&quot;       &quot;temp2&quot;</code></pre>
<p>Remove them with <code>rm</code>:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rm</span>(temp1)
<span class="co"># Or remove a list of objects:</span>
<span class="kw">rm</span>(temp2, summary_dat)</code></pre>
</div>


</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>

<!-- dynamically load mathjax for compatibility with --self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://c328740.ssl.cf1.rackcdn.com/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
